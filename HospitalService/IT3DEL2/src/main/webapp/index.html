<!DOCTYPE html>
<html lang="en">
<!--     root = true -->
<head>
    <meta charset="UTF-8">
    <title>index/Forside</title>
    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" type="text/css" href="rekcss.css">
</head>
<script>
    async function Login(){
        let formElement = document.getElementById("form");
        let formData = new FormData(formElement);
        let json = Object.fromEntries(formData);
        let res = await fetch("rest/login",{
            method:"POST",
            body: JSON.stringify(json),
            headers:{
                "content-type":"application/json"
            }
        })
       // alert(res);
        let token= await res.text();
     //   alert(token);

        if (res.status==200){
            localStorage.setItem("token", token);
            console.log(token);
            window.location.href="PatientForside.html"
        }
        else{
            alert("du er ikke logget ind")
        }

    }
    /*
    async function validate(){
        let token = localStorage.getItem("token")
        fetch("rest/tokentest",{
            method:"POST",
            body: token,
            headers: {
                "authorization": "Bearer "+localStorage.getItem("token")
            }
        })
            .then(
                (response)=> {
                    if (response.status ==200){
                        response.text().then(
                            (user)=> {
                                console.log("Got Token: " + user)
                                localStorage.setItem("user",user);
                                window.location.href="PatientForside.html"

                            })
                    }
                   }

            ).catch(()=>alert("Uha - login fejlede" ))
    }
     */


</script>
<div class="header" id="myHeader">
    <u class="underlineHeader">
        <text class="header1">Sundhedsplatformen 2.0</text>
    </u><br>
    <text class="header2">Elektronisk patient journal</text>
    <br>
    <text class="header3">Anno 2021</text>
    <br>
    <!--<p><button id="idButton" class="button1" >Annuller</button></p> -->
    <!-- <p><button id="iddButton" class="button2" >Gem</button></p>-->
</div>

<div>
    <div id="sundoverskrift">
        <p class="overskriftside"> Velkommen til sundhedsplatformen 2.0</p>
    </div>

    <form id="form">
        <input name="username">
        <input name="password">
    </form>
    <!--
    <div id="loginkasse2" style="margin-left: 35%; position: absolute; margin-top: 10px;">
        <div id="brugernavn1">
            <label for="Username" style="width:250px"> Username:</label><br>
        </div>

        <div style="position:absolute; margin-left: 100px">
            <label for="username"></label><input type="text" id="username" name=username" required><br>
        </div>
        <br><br>
        <div style="width:1px; background-color:whitesmoke; position:absolute">
            <label for="password">Password:</label><br>
        </div>

        <div style="position:absolute;margin-left: 100px"><input type="password" id="password" name="password"
                                                                 required><br><br>

          -->
        </div>
        <br>

    </div>
</div>

<body>

<button onclick="Login();">Login</button>

<!--
<button onclick="validate();">validere</button>
-->

</body>
</html>
